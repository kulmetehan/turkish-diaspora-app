# N3.1 – News Listing Endpoint

## Route
- `GET /api/v1/news`

## Query Parameters
- `feed` (required): one of `diaspora`, `nl`, `tr`, `local`, `origin`, `geo`, `trending`.
- `limit` (optional): max items per page (1–100, default 20).
- `offset` (optional): pagination offset (default 0).
- `themes` (optional): repeatable or comma-separated list of themes to filter on. Allowed values: `politics`, `economy`, `culture`, `religion`, `sports`, `security`. Not supported for the `trending` feed.

## Behaviour
- Feeds `diaspora` through `geo` reuse `news_feed_rules` thresholds sourced from `ai_config`.
- `trending` uses the max relevance score across feeds and prioritises articles from the last 7 days.
- Only rows with `processing_state='classified'` are returned.
- Results are sorted by relevance score (or trending score) and `published_at DESC`.
- Internal fields (`raw_entry`, `ingest_hash`, `location_context`, etc.) never leave the API.
- Theme filters apply an additional `topics` match (logical OR) on top of the feed criteria.

## Response Shape
```json
{
  "items": [
    {
      "id": 1,
      "title": "Rotterdam diaspora event",
      "snippet": "Short summary generated from the article metadata.",
      "source": "Rijnmond",
      "published_at": "2025-11-22T09:15:00Z",
      "url": "https://example.com/news/rotterdam",
      "image_url": "https://example.com/image.jpg",
      "tags": ["local", "community", "diaspora"]
    }
  ],
  "total": 42,
  "limit": 20,
  "offset": 0
}
```

Use `limit` + `offset` to fetch subsequent pages until `offset >= total`.


